import { u } from 'unist-builder';
import { visit } from 'unist-util-visit';
import { createMdxJsxAttribute } from '../../lib/remark-utils.js';
export const rehypeTable = () => {
    return (tree) => {
        visit(tree, 'element', (node, index, parent) => {
            if (node.tagName === 'table' && parent && index !== undefined) {
                const attributes = Object.entries(node.properties).map(([key, value]) => {
                    const attributeValue = Array.isArray(value) ? value.join(' ') : value;
                    const attributeName = key === 'class' ? 'className' : key;
                    return createMdxJsxAttribute(attributeName, attributeValue);
                });
                const tableComponent = u('mdxJsxFlowElement', {
                    name: 'Table',
                    attributes,
                }, node.children);
                parent.children.splice(index, 1, tableComponent);
            }
        });
    };
};
